{% extends 'base.html' %}

{% block content %}
  <h2 class="page-title">User Profile</h2>

  <div class="grid-2">
    <div class="card">
      <p><strong>Email:</strong> {{ user.email }}</p>
      <p><strong>Username:</strong> {{ user.username }}</p>
      <p><strong>Phone No:</strong> {{ user.phone_no }}</p>
      <p><strong>Gender:</strong> {{ user.gender }}</p>
      <p><strong>Date of Birth:</strong> {{ user.date_of_birth }}</p>
      <p><strong>Nationality:</strong> {{ user.nationality }}</p>
      <p><strong>Address:</strong> {{ user.address }}</p>
      <p><strong>Postal Code:</strong> {{ user.postal_code }}</p>
      <p><strong>Passport No:</strong> {{ user.passport_no }}</p>

      <div class="actions">
        <a href="{% url 'edit_profile' %}" class="btn">Edit Profile</a>
        <a href="{% url 'logout' %}" class="btn btn-outline">Logout</a>
      </div>
    </div>

    <div class="card center">
      {% if user.profile_picture %}
        <img src="{{ user.profile_picture.url }}" alt="Profile Picture" class="avatar-lg">
      {% else %}
        <div class="avatar-placeholder">ðŸ‘¤</div>
      {% endif %}
    </div>
  </div>

  <hr class="soft">

  <h3 class="section-title">Previous Bookings</h3>

  {% if bookings %}
    <div class="table-wrap">
      <table class="flight-table">
        <thead>
          <tr>
            <th>Flight Number</th>
            <th>Airline</th>
            <th>Departure</th>
            <th>Destination</th>
            <th>Departure Time</th>
            <th>Seats Booked</th>
            <th>Booking Date</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
        {% for booking in bookings %}
          <tr>
            <td>{{ booking.ticket.flight_no }}</td>
            <td>{{ booking.ticket.airline_name }}</td>
            <td>{{ booking.ticket.departure }}</td>
            <td>{{ booking.ticket.destination }}</td>
            <td>{{ booking.ticket.departure_time|date:"Y-m-d H:i" }}</td>
            <td>{{ booking.seats_booked }}</td>
            <td>{{ booking.booking_date|date:"Y-m-d H:i" }}</td>
            <td>{% if booking.confirmed %}Confirmed{% else %}Pending{% endif %}</td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p class="muted">You have no previous bookings.</p>
  {% endif %}
{% endblock %}
